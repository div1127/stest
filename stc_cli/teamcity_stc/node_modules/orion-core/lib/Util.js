"use strict";function expand(a,b){for(;a.length<=b/2;)a+=a;for(;a.length<b;)a+=a[0];return a}var UserAgent=require("orion-core/lib/model/UserAgent.js"),Network=require("orion-core/lib/Network.js"),os=require("os"),crlfRe=/\r\n/g,spaces=" ",tabs="\t",Util={isWin:/^win/.test(process.platform),isLinux:/^linux/.test(process.platform),isMac:/^darwin/.test(process.platform),clone:function(a){var b,c=a;if(null!=a)if(Array.isArray(a))for(c=[],b=a.length;b-- >0;)c[b]=Util.clone(a[b]);else if(c.constructor===Object){c={};for(b in a)c[b]=Util.clone(a[b])}return c},merge:function(a,b){b=Array.prototype.slice.call(arguments,1);var c,d,e,f,g,h=b.length;for(c=0;c<h;++c)if(e=b[c])for(d in e)g=e[d],g&&g.constructor===Object?(f=a[d],f&&f.constructor===Object?Util.merge(f,g):a[d]=Util.clone(g)):a[d]=g;return a},nativizeLines:function(a){return Util.normalizeLines(a,Util.EOL)},normalizeLines:function(a,b){return crlfRe.test(a)&&(a=a.replace(crlfRe,b||"\n")),a},flatten:function(a,b){if(b=b||[],a)for(var c=0;c<a.length;c++){var d=a[c];Array.isArray(d)?this.flatten(d,b):b.push(d)}return b},getLocalIpAddresses:Network.getLocalIpAddresses,getLocalIpAddress:Network.getLocalIpAddress,isAddressLocal:function(a,b){return!!(!b||UserAgent.local&&UserAgent.local.isOsEqual(b))&&Network.isAddressLocal(a)},createMap:function(a,b){var c={};return a&&a.forEach(function(a){var d=b(a);c[d]=a}),c},_tabsRe:/^\t+/,_spacesRe:/^[ ]+/,tabbify:function(a,b){if("string"!=typeof a)for(var c=a.length;c-- >0;)a[c]=Util.tabbify(a[c],b);else{var d=Util._spacesRe.exec(a);if(d){var e=d[0].length,f=e%b,g=(e-f)/b;spaces.length<f&&(spaces=expand(spaces,f)),tabs.length<g&&(tabs=expand(tabs,g)),a=tabs.substr(0,g)+spaces.substr(0,f)+a.substr(e)}}return a},untabbify:function(a,b){if("string"!=typeof a)for(var c=a.length;c-- >0;)a[c]=Util.untabbify(a[c],b);else{var d=Util._tabsRe.exec(a);if(d){var e=d[0].length,f=e*b;spaces.length<f&&(spaces=expand(spaces,f)),a=spaces.substr(0,f)+a.substr(e)}}return a},isBoolean:function(a){return"boolean"==typeof a},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a&&isFinite(a)},isObject:function(a){return a instanceof Object&&a.constructor===Object},isArray:function(a){return Array.isArray(a)},getTypeOf:function(a){var b=this;return b.isBoolean(a)?"boolean":b.isNumber(a)?"number":b.isArray(a)?"array":b.isString(a)?"string":(b.isObject(a),"object")}};Util.EOL=Util.isWin?"\r\n":"\n",module.exports=Util;