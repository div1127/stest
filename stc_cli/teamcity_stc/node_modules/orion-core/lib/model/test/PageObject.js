"use strict";function _interopRequireDefault(a){return a&&a.__esModule?a:{"default":a}}var _getPrototypeOf=require("babel-runtime/core-js/object/get-prototype-of"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("babel-runtime/helpers/inherits"),_inherits3=_interopRequireDefault(_inherits2),AST=require("../../AST"),Entity=require("../Entity"),Path=require("path"),fs=require("fs"),PageObject=function(a){function b(a,c){(0,_classCallCheck3["default"])(this,b);var d=(0,_possibleConstructorReturn3["default"])(this,(b.__proto__||(0,_getPrototypeOf2["default"])(b)).call(this,a));return d.project=c,d.name=a.name,d}return(0,_inherits3["default"])(b,a),(0,_createClass3["default"])(b,[{key:"getPath",value:function(){return Path.join(this.project.getPageObjectPath(),this.data.name+".js")}},{key:"getFileName",value:function(){var a=this.getPath().split("/");return a[a.length-1]}},{key:"updateContent",value:function(a){fs.writeFileSync(this.getPath(),a)}},{key:"_locatorVisitor",value:function(a,b){var c=a.node,d=c.key&&c.key.name||null;if("_locators"===d){var e=c.value.properties;e&&(e.forEach(function(a){var c=a.key&&a.key.name,d=a.value&&a.value.properties,e={};d.forEach(function(a){var b=a.key.name,c=a.value.value;e[b]=c}),b[c]=e}),a.stop())}}},{key:"getLocators",value:function(){var a=this.getPath(),b={},c=[],d=void 0,e=void 0;try{e=fs.readFileSync(a,"utf-8"),d=AST.parse(e)}catch(f){}AST.traverse(d,this._locatorVisitor,b);for(var g in b)c.push(b[g]);return c}}]),b}(Entity);module.exports=PageObject;