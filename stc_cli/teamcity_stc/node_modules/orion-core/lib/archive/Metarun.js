"use strict";function _interopRequireDefault(a){return a&&a.__esModule?a:{"default":a}}var _getIterator2=require("babel-runtime/core-js/get-iterator"),_getIterator3=_interopRequireDefault(_getIterator2),_getPrototypeOf=require("babel-runtime/core-js/object/get-prototype-of"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("babel-runtime/helpers/inherits"),_inherits3=_interopRequireDefault(_inherits2),Base=require("../Base"),Integration=require("./integration/Integration"),JiraIntegration=require("./integration/JiraIntegration"),logger=require("../Logger").getInstance().forClass("archive/Metarun"),Metarun=function(a){function b(){return(0,_classCallCheck3["default"])(this,b),(0,_possibleConstructorReturn3["default"])(this,(b.__proto__||(0,_getPrototypeOf2["default"])(b)).apply(this,arguments))}return(0,_inherits3["default"])(b,a),(0,_createClass3["default"])(b,[{key:"ctor",value:function(){var a=this;a._metarunIntegrations={}}},{key:"createIntegration",value:function(a){logger.trace(".integration");var b,c,d=this,e={integration:Integration,jira:JiraIntegration},f=d._getData(a);return b=d.type,c=e[b],d._metarunIntegrations[a.join("/")]=new c({metarun:d,path:a,data:f.integration||{ignored:!1}})}},{key:"getIntegration",value:function(a){var b=this,c=b._metarunIntegrations[a.join("/")];return c||(c=b.createIntegration(a)),c}},{key:"setData",value:function(a,b,c){logger.trace(".setData <= ","path","property","value");var d,e=this.data,f=!0,g=!1,h=void 0;try{for(var i,j=(0,_getIterator3["default"])(a);!(f=(i=j.next()).done);f=!0){var k=i.value;e[k]||(e[k]={}),e=e[k]}}catch(l){g=!0,h=l}finally{try{!f&&j["return"]&&j["return"]()}finally{if(g)throw h}}d=e.__meta||(e.__meta={}),d[b]=c}},{key:"_getData",value:function(a){logger.trace("._getData <= ","path");var b=this.data,c=!0,d=!1,e=void 0;try{for(var f,g=(0,_getIterator3["default"])(a);!(c=(f=g.next()).done);c=!0){var h=f.value;b=b&&b[h]}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return b&&b.__meta||{}}}]),b}(Base);module.exports=Metarun;