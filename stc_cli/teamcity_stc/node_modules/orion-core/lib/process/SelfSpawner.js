"use strict";function _interopRequireDefault(a){return a&&a.__esModule?a:{"default":a}}var _getPrototypeOf=require("babel-runtime/core-js/object/get-prototype-of"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("babel-runtime/helpers/inherits"),_inherits3=_interopRequireDefault(_inherits2),Base=require("orion-core/lib/Base"),ChildProcessTask=require("orion-core/lib/tasks/ChildProcessTask"),Util=require("orion-core/lib/Util"),xfs=require("orion-core/lib/xfs"),ProcessUtil=require("orion-core/lib/process/ProcessUtil"),SelfSpawner=function(a){function b(){return(0,_classCallCheck3["default"])(this,b),(0,_possibleConstructorReturn3["default"])(this,(b.__proto__||(0,_getPrototypeOf2["default"])(b)).apply(this,arguments))}return(0,_inherits3["default"])(b,a),(0,_createClass3["default"])(b,[{key:"ctor",value:function(){var a=this,b=ProcessUtil.execInfo;a._spawnExecutable=b.spawnExecutable,a._params=b.baseCommandLineParams.concat(a.getSpawnSwitches())}},{key:"getSpawnExecutable",value:function(){return this._spawnExecutable}},{key:"spawn",value:function(){var a,b=this,c=b._spawnExecutable,d=Util.clone(b._params),e={stdio:Util.isLinux?["pipe","pipe","pipe","ipc"]:["ipc","pipe","pipe"]},f={description:b.getChildProcessDescription(),executable:c,args:d,stdoutLevel:"debug",opts:e};return Util.isWin&&(f.launchProcess=function(){return ProcessUtil.spawn({executable:c,args:d,options:e})}),a=b.task=new ChildProcessTask(f),a.running?b.onTaskRunning():a.on("running",b.onTaskRunning.bind(b)),a.on("complete",b.onTaskComplete.bind(b)),a}}],[{key:"meta",get:function(){return{mixinId:"selfSpawner"}}}]),b}(Base);module.exports=SelfSpawner;